# LLM Routing Configuration
# 
# Model selection based on step, with fallback chains.
# Router does NOT retry - only switches models on failure.
# Retry logic is handled by callers (translate_llm, repair_loop, etc.)

routing:
  translate:
    default: gpt-4.1
    fallback: [claude-sonnet-4-5-20250929, gpt-4.1-mini]

  soft_qa:
    default: gpt-4.1-mini
    fallback: [gpt-4.1, gemini-2.5-pro]

  repair_hard:
    default: claude-sonnet-4-5-20250929
    fallback: [gpt-4.1]

  repair_post_soft:
    default: claude-sonnet-4-5-20250929
    fallback: [gpt-4.1-mini]

  repair_soft_major:
    default: gpt-4.1
    fallback: [claude-sonnet-4-5-20250929]

  glossary_autopromote:
    default: gpt-4.1-mini
    fallback: [gpt-4.1, gemini-2.5-pro]

  translate_refresh:
    default: claude-sonnet-4-5-20250929
    fallback: [gpt-4.1, gpt-4.1-mini]

  _default:
    default: gpt-4.1-mini
    fallback: [gpt-4.1]

fallback_triggers:
  http_codes: [429, 500, 502, 503, 504]
  on_timeout: true
  on_network_error: true
  on_parse_error: true
  # Router 不做重试，只换模型；重试上移到调用方/loop 控制
  max_attempts_total: 1
