# LLM Routing Configuration
# 
# Model selection based on step, with fallback chains.
# Router does NOT retry - only switches models on failure.
# Retry logic is handled by callers (translate_llm, repair_loop, etc.)

routing:
  translate:
    default: gpt-4.1-mini
    fallback: [gpt-4.1, claude-sonnet-4-5-20250929]

  soft_qa:
    default: gpt-4.1-nano
    fallback: [gpt-4o-mini, gpt-4.1-mini]

  repair_hard:
    default: claude-sonnet-4-5-20250929
    fallback: [gpt-4.1]

  repair_post_soft:
    default: gpt-4.1-mini
    fallback: [claude-sonnet-4-5-20250929]

  repair_soft_major:
    default: gpt-4.1-mini
    fallback: [claude-sonnet-4-5-20250929]

  glossary_autopromote:
    default: deepseek-v3
    fallback: [gpt-4.1-mini]

  translate_refresh:
    default: claude-sonnet-4-5-20250929
    fallback: [gpt-4.1]

  # Fallback for unknown steps
  _default:
    default: gpt-4.1-mini
    fallback: []

fallback_triggers:
  # HTTP status codes that trigger fallback
  http_codes: [429, 500, 502, 503, 504]
  # Error kinds that trigger fallback
  on_timeout: true
  on_network_error: true
  on_parse_error: true

# Router does NOT retry within a model - only switches to next in chain
# Total attempts = len(model_chain), each model gets exactly 1 try
# Caller manages any additional retry logic
