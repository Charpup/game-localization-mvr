# Cost Monitoring Configuration
# Used by cost_monitor.py and cost_snapshot.py

version: 1
enable: true

providers:
  apiyi:
    enable: true
    base_url_match: "https://api.apiyi.com/v1"
    # Usage pull intervals
    pull_interval_seconds: 300     # Pull every 5 minutes
    pull_every_n_calls: 200        # Or every 200 LLM calls

local_estimation:
  enable: true
  pricing_file: "config/pricing.yaml"
  routing_file: "config/llm_routing.yaml"

outputs:
  dir: "reports/cost"
  snapshot_on_signal: true   # Generate snapshot on STOP/PAUSE/Ctrl+C

# Anomaly detection thresholds
anomalies:
  completion_hits_max_tokens:
    threshold_ratio: 0.98     # completion_tokens >= 98% of max_tokens
    warning_ratio: 0.01       # Warn if hit ratio > 1%
